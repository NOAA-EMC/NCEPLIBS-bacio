<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NCEPLIBS-bacio: bacio.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NCEPLIBS-bacio
   &#160;<span id="projectnumber">2.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('bacio_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">bacio.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Fortran-callable routines to read and write characther data byte addressably.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;ctype.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="clib_8h_source.html">clib.h</a>&quot;</code><br />
</div>
<p><a href="bacio_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3b371baf447eb8e8de07015d2772e1b7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bacio_8c.html#a3b371baf447eb8e8de07015d2772e1b7">baciol</a> (int mode, long int start, int size, long int no, long int *nactual, int *fdes, const char *fname, void *datary)</td></tr>
<tr class="memdesc:a3b371baf447eb8e8de07015d2772e1b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do a bacio operation.  <a href="bacio_8c.html#a3b371baf447eb8e8de07015d2772e1b7">More...</a><br /></td></tr>
<tr class="separator:a3b371baf447eb8e8de07015d2772e1b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Fortran-callable routines to read and write characther data byte addressably. </p>
<p>v1.1:</p><ul>
<li>Put diagnostic output under control of define VERBOSE or QUIET</li>
<li>Add option of non-seeking read/write</li>
<li><p class="startli">Return code for fewer data read/written than requested</p>
<p class="startli">v1.2:</p>
</li>
<li><p class="startli">Add cray compatibility 20 April 1998 Robert Grumbine</p>
<p class="startli">v1.3:</p>
</li>
<li>Add IBMSP compatibility (IBM4, IBM8)</li>
<li>Add modes BAOPEN_WONLY_TRUNC, BAOPEN_WONLY_APPEND</li>
<li>Use isgraph instead of isalnum + a short list of accepted characters for filename check 12 Dec 2000 Stephen Gilbert</li>
<li><p class="startli">negative return codes are wrapped to positive, revise return codes verify that banio and bacio have same contents, update comments 29 Oct 2008 Robert Grumbine</p>
<p class="startli">v1.4:</p>
</li>
<li>21 Nov 2008 Add baciol and baniol functions, versions to work with files over 2 Gb Robert Grumbine</li>
<li>Aug 2012 Jun Wang fix c filename length because the c string needs to end with "null" terminator , and free allocated cfile name realname to avoid memory leak.</li>
<li>Sep 2012 Jun Wang: remove execute permission on the data file generated by bacio.</li>
</ul>
<p>v2.5: Oct. 2021 - Ed Hartnett - Extensive cleanup, testing, and refactor. Converted to use ISO C/Fortran compatibility.</p>
<dl class="section author"><dt>Author</dt><dd>Robert Grumbine </dd></dl>
<dl class="section date"><dt>Date</dt><dd>16 March 1998 </dd></dl>

<p class="definition">Definition in file <a class="el" href="bacio_8c_source.html">bacio.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a3b371baf447eb8e8de07015d2772e1b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b371baf447eb8e8de07015d2772e1b7">&#9670;&nbsp;</a></span>baciol()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int baciol </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long int&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long int&#160;</td>
          <td class="paramname"><em>no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long int *&#160;</td>
          <td class="paramname"><em>nactual</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>fdes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>datary</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do a bacio operation. </p>
<p>Available operations include:</p><ul>
<li>opening a file.</li>
<li>writing to an open file.</li>
<li>reading from an open file.</li>
<li>closing an open file.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td>Specifies operations to be performed. See the clib.inc file for the values. Mode is obtained by adding together the values corresponding to the operations The best method is to include the clib.inc file and refer to the names for the operations rather than rely on hard-coded values. </td></tr>
    <tr><td class="paramname">start</td><td>Byte number to start your operation from. 0 is the first byte in the file, not 1. </td></tr>
    <tr><td class="paramname">size</td><td>The size of the objects you are trying to read or write (i.e. the size of one element of the type - 4 for integers, for example.) </td></tr>
    <tr><td class="paramname">no</td><td>The number of elements to read or write (characters, integers, whatever). </td></tr>
    <tr><td class="paramname">nactual</td><td>A pointer that gets the number of elements actually read or written. If the read/write operation succeeded, this will equal the value of parameter no. </td></tr>
    <tr><td class="paramname">fdes</td><td>Pointer that gets an integer file id. This is not a Fortran Unit Number You can use it, however, to refer to files you've previously opened. </td></tr>
    <tr><td class="paramname">fname</td><td>is the name of the file. This only needs to be defined when you are opening a file. It must be (on the Fortran side) declared as CHARACTER*N, where N is a length greater than or equal to the length of the file name. </td></tr>
    <tr><td class="paramname">datary</td><td>is the name of the entity (variable, vector, array) that you want to write data out from or read it in to. The fact that C is declaring it to be a char * does not affect your fortran.</td></tr>
  </table>
  </dd>
</dl>
<p>This function is called from the Fortran code in <a class="el" href="baciof_8f90.html" title="Contains subroutines to read/write binary files.">baciof.f90</a>.</p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="clib_8h.html#a1128a2f690f3efb02656f7b24170e49f" title="No error.">BA_NOERROR</a> No error. </dd>
<dd>
<a class="el" href="clib_8h.html#a2b1b8b2d171c69a9fab2f1f94e34aedf" title="Tried to open read only and write only.">BA_EROANDWO</a> Tried to open read only and write only. </dd>
<dd>
<a class="el" href="clib_8h.html#a651113478a7af4376ce5e578080a26a6" title="Tried to read and write in the same call.">BA_ERANDW</a> Tried to read and write in the same call. </dd>
<dd>
<a class="el" href="clib_8h.html#affa0a216e911419d0bb272883dc049a4" title="Internal failure in name processing.">BA_EINTNAME</a> Internal failure in name processing. </dd>
<dd>
<a class="el" href="clib_8h.html#a56bf267f69bafe247255901c9dab0fce" title="Failure in opening file.">BA_EFILEOPEN</a> Failure in opening file. </dd>
<dd>
<a class="el" href="clib_8h.html#acc964b9090c0c7e4ebea82f2959d2758" title="Tried to read on a write-only file.">BA_ERONWO</a> Tried to read on a write-only file. </dd>
<dd>
<a class="el" href="clib_8h.html#a902625e6d60b73e3a4ed57b8352eaf30" title="Failed in read to find the &#39;start&#39; location.">BA_ERNOSTART</a> Failed in read to find the 'start' location. </dd>
<dd>
<a class="el" href="clib_8h.html#a5f582b1f50bde89ee1019f4e5935694c" title="Tried to write to a read only file.">BA_EWANDRO</a> Tried to write to a read only file. </dd>
<dd>
<a class="el" href="clib_8h.html#afba910351ed15039863873776e1bd976" title="Failed in write to find the &#39;start&#39; location.">BA_EWNOSTART</a> Failed in write to find the 'start' location. </dd>
<dd>
<a class="el" href="clib_8h.html#a0c1383b7cfd25c8c174291fefccfd4f6" title="Error in close.">BA_ECLOSE</a> Error in close. </dd>
<dd>
<a class="el" href="clib_8h.html#a12f69cd14877c92381d53bd581efd7a6" title="Read or wrote fewer data than requested.">BA_EFEWDATA</a> Read or wrote fewer data than requested. </dd>
<dd>
<a class="el" href="clib_8h.html#a1c47379e09e8c325b85db98761a8a47c" title="Data pointer is NULL.">BA_EDATANULL</a> Data pointer is NULL.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Robert Grumbine </dd></dl>
<dl class="section date"><dt>Date</dt><dd>21 November 2008 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Ed Hartnett </dd></dl>
<dl class="section date"><dt>Date</dt><dd>18 October, 2021 </dd></dl>
<p>&lt; Open file read only.</p>
<p>&lt; Open or create file for Write only.</p>
<p>&lt; Open or create a file for write only, truncating existing contents.</p>
<p>&lt; Open or create a file for write only append.</p>
<p>&lt; Tried to open read only and write only.</p>
<p>&lt; Read from an open file.</p>
<p>&lt; Write to an open file.</p>
<p>&lt; Tried to read and write in the same call.</p>
<p>&lt; Open file read only.</p>
<p>&lt; Open or create file for Write only.</p>
<p>&lt; Open or create a file for write only, truncating existing contents.</p>
<p>&lt; Open or create a file for write only append.</p>
<p>&lt; Open or create file for read/write.</p>
<p>&lt; Failure in opening file.</p>
<p>&lt; Read from an open file.</p>
<p>&lt; Open or create file for Write only.</p>
<p>&lt; Open or create a file for write only, truncating existing contents.</p>
<p>&lt; Open or create a file for write only append.</p>
<p>&lt; Tried to read on a write-only file.</p>
<p>&lt; Read from an open file.</p>
<p>&lt; No seek ignore start parameter and do not call lseek().</p>
<p>&lt; Failed in read to find the 'start' location.</p>
<p>&lt; Data pointer is NULL.</p>
<p>&lt; Write to an open file.</p>
<p>&lt; Open file read only.</p>
<p>&lt; Tried to write to a read only file.</p>
<p>&lt; Write to an open file.</p>
<p>&lt; No seek ignore start parameter and do not call lseek().</p>
<p>&lt; Failed in write to find the 'start' location.</p>
<p>&lt; Data pointer is NULL.</p>
<p>&lt; Close an open file.</p>
<p>&lt; Error in close.</p>
<p>&lt; Read from an open file.</p>
<p>&lt; Write to an open file.</p>
<p>&lt; Read or wrote fewer data than requested.</p>
<p>&lt; No error.</p>

<p class="definition">Definition at line <a class="el" href="bacio_8c_source.html#l00101">101</a> of file <a class="el" href="bacio_8c_source.html">bacio.c</a>.</p>

<p class="reference">References <a class="el" href="clib_8h_source.html#l00038">BA_ECLOSE</a>, <a class="el" href="clib_8h_source.html#l00040">BA_EDATANULL</a>, <a class="el" href="clib_8h_source.html#l00039">BA_EFEWDATA</a>, <a class="el" href="clib_8h_source.html#l00033">BA_EFILEOPEN</a>, <a class="el" href="clib_8h_source.html#l00031">BA_ERANDW</a>, <a class="el" href="clib_8h_source.html#l00035">BA_ERNOSTART</a>, <a class="el" href="clib_8h_source.html#l00030">BA_EROANDWO</a>, <a class="el" href="clib_8h_source.html#l00034">BA_ERONWO</a>, <a class="el" href="clib_8h_source.html#l00036">BA_EWANDRO</a>, <a class="el" href="clib_8h_source.html#l00037">BA_EWNOSTART</a>, <a class="el" href="clib_8h_source.html#l00029">BA_NOERROR</a>, <a class="el" href="clib_8h_source.html#l00020">BACLOSE</a>, <a class="el" href="clib_8h_source.html#l00017">BAOPEN_RONLY</a>, <a class="el" href="clib_8h_source.html#l00019">BAOPEN_RW</a>, <a class="el" href="clib_8h_source.html#l00018">BAOPEN_WONLY</a>, <a class="el" href="clib_8h_source.html#l00025">BAOPEN_WONLY_APPEND</a>, <a class="el" href="clib_8h_source.html#l00024">BAOPEN_WONLY_TRUNC</a>, <a class="el" href="clib_8h_source.html#l00021">BAREAD</a>, <a class="el" href="clib_8h_source.html#l00022">BAWRITE</a>, and <a class="el" href="clib_8h_source.html#l00023">NOSEEK</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="bacio_8c.html">bacio.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
